{% extends 'base.html' %}
{% load static %}

{% block title %}Iniciar Sesi贸n{% endblock title %}

{% block extra_css %}
    <link rel="stylesheet" href="{% static 'css/login.css' %}">
{% endblock extra_css %}

{% block contenido %}
    
    <div class="form-card mx-auto">
        <h2 class="form-title text-center mb-4"> Iniciar Sesi贸n</h2>
        
        {# Muestra errores no relacionados con campos espec铆ficos #}
        {% if form.errors and form.non_field_errors %}
            <div class="alert alert-danger mb-4">
                {% for error in form.non_field_errors %}
                    <p class="error-text">{{ error }}</p>
                {% endfor %}
            </div>
        {% endif %}

        <form method="post" class="form-body">
            {% csrf_token %}
            
            {% for field in form %}
                <div class="form-field">
                    {{ field.label_tag }}
                    {{ field }}
                    {% if field.errors %}
                        <small class="error-text">{{ field.errors }}</small>
                    {% endif %}
                </div>
            {% endfor %}

            <button type="submit" class="btn-submit">Iniciar Sesi贸n</button>
            
            {# A帽adimos el campo hidden 'next' para la redirecci贸n despu茅s del login #}
            {% if next %}
                <input type="hidden" name="next" value="{{ next }}" />
            {% endif %}

        </form>

        <p class="mt-4 text-center">
            驴Olvidaste tu contrase帽a? <a href="{% url 'password_reset' %}" class="link-reset">Restablecer</a>
        </p>
    </div>

{% endblock contenido %}